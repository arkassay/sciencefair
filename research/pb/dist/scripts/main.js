"use strict";var pb=pb||{};!function(){pb.namespace=function(a){var b,c=a.split("."),d=pb;for("pb"===c[0]&&(c=c.slice(1)),b=0;b<c.length;b+=1)"undefined"==typeof d[c[b]]&&(d[c[b]]={}),d=d[c[b]];return d}}(),pb.version="0.0.0",function(a){function b(){g.content="width=device-width,minimum-scale="+f[0]+",maximum-scale="+f[1],a.removeEventListener(d,b,!0)}var c="addEventListener",d="gesturestart",e="querySelectorAll",f=[1,1],g=e in a?a[e]("meta[name=viewport]"):[];(g=g[g.length-1])&&c in a&&(b(),f=[.25,1.6],a[c](d,b,!0))}(document),pb.namespace("controller"),pb.controller=function(){function a(){pb.menu.init(),pb.header.init(),pb.utils.init()}return{init:a}}(),$(function(){pb.controller.init()}),pb.namespace("menu"),pb.menu=function(){function a(){g(),f()}function b(a){TweenMax.set(a,{transformPerspective:1100}),TweenMax.to(a,.1,{transformOrigin:"50% 0%",scale:1}),h.css({visibility:"hidden",display:"none"}),$("#home-area, .main-content").css("height",""),TweenMax.set(a,{bottom:0,opacity:0,rotationX:-10,scale:1}),c(a)}function c(a){offset=$(window).scrollTop(),$("body").addClass("scroll open"),a.css({visibility:"visible",display:"block"});var b=$(window).height();$("#home-area, .main-content").height(b),TweenMax.to(a,.35,{rotationX:0,opacity:1,ease:Ease.easeOut}),j=!0}function d(a){a.fadeOut("fast",function(){$("body").removeClass("scroll open"),j=!1,$("#home-area, .main-content").css("height","")})}function e(){var a=$(".mobile-search");a.val("Search")}function f(){h.css("min-height",$(window).height())}function g(){$(".icn-menu").click(function(a){a.preventDefault(),j?($(this).removeClass("x"),d(h)):($(this).addClass("x"),b(h))}),$(window).resize(function(){f()}),$(".close.close-search").click(function(a){a.preventDefault(),d(i)}),$(".search-clear").click(function(a){a.preventDefault(),e()})}var h=$(".menu-overlay"),i=$(".search-overlay"),j=!1;return{init:a}}(),pb.namespace("model"),pb.model=function(){var a=!1,b=!1;return{touch:a,mobile:b}},pb.namespace("header"),pb.header=function(){function a(a){var b,c=document.querySelector("header");b=a?new Headroom(c,a):new Headroom(c),this.headerpin=b.init()}var b;return{init:a,headerpin:b}}(),pb.namespace("home"),pb.home=function(){function a(){e(),g()}function b(a){1!=a||$(h).hasClass("visible-xs")||$(h).fadeOut("fast",function(){$(h).addClass("visible-xs")}),0==a&&$(h).hasClass("visible-xs")&&$(h).fadeOut(function(){$(h).removeClass("visible-xs"),$(h).fadeIn()})}function c(a){$(a).fadeOut(function(){$(a).fadeIn(function(){$(a).toggleClass("visible-xs"),f(a)})})}function d(a){$(a).fadeOut(function(){$(a).toggleClass("visible-xs"),$(".links .cat").hasClass("inactive")||b(!1)})}function e(){$(".animatedValue").each(function(a,b){var c=$(b).attr("id"),d=$(b).hasClass("percent");i[a]=new pb.animatedvalues,d?i[a].init(c,{afterText:"<span>%</span>"}):i[a].init(c,{afterText:""}),i[a].changeTo(0)})}function f(a){var b=$(a).find(".animatedValue"),c="";$.each(b,function(){c=$(this).attr("id"),$.each(i,function(a){i[a].$el.selector==c&&i[a].animateTo()})})}function g(){$(".cat-transition").click(function(a){a.preventDefault();var b=$(this).attr("data-cat");if(b){$("footer").css("position","static");var c={replaceElement:$("#home-area"),pagename:b,callback:function(){pb.category.fixedTabs()}},d=new pb.utils.pagetransition;d.init(c)}}),$(".links a").mouseenter(function(){var a=$(this).attr("data-catshow"),d=".group."+a;$(this).parent().siblings().addClass("inactive"),b(!0),c(d)}),$(".links a").mouseout(function(){var a=$(this).attr("data-catshow"),b=".group."+a;$(this).parent().siblings().removeClass("inactive"),d(b)})}var h=".group.default",i=[];return{init:a}}(),$(function(){pb.home.init()}),pb.namespace("animatedvalues"),pb.animatedvalues=function(){function a(a,b){e={},b&&(this.options=b),this.$el=$(a),this.value=0}function b(a){var b="";this.options.beforeText&&(b+=this.options.beforeText),b+=a,this.options.afterText&&(b+=this.options.afterText);var c=this.$el.selector,d=$("#"+c);d.html(b)}function c(){var a=this,b=this.$el.selector,c=$("#"+b),d=c.attr("data-val");c.css({value:pb.animatedvalues.value}),c.animate({value:d,left:this.percent*this.width},{duration:1400,step:function(b,c){if("value"==c.prop){var d=Math.floor(c.now).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,");a.changeTo(d)}}},"easeOutQuad")}var d,e;return{init:a,changeTo:b,animateTo:c,$el:d}},pb.namespace("category"),pb.category=function(){function a(){b()}function b(){$(".tabs-placehold").height($(".tabs").height());var a=$(".tabs").offset().top;$(window).scroll(function(){$(window).scrollTop()>=a?$(".tabs").addClass("fixed"):$(".tabs").removeClass("fixed pinned")}),$(window).resize(function(){a=$(".tabs").offset().top}),pb.header.headerpin.onPin=function(){$(".tabs.fixed").addClass("pinned")},pb.header.headerpin.onUnpin=function(){$(".tabs.fixed").removeClass("pinned")}}return{init:a,fixedTabs:b}}(),pb.namespace("utils"),pb.utils=function(){function a(){e(),$(".additional-content").slideUp(),c(),d(),b()}function b(){$(".bgimage").length>0&&pb.utils.bgimage.loadBgImages()}function c(){console.log("checkForTouch()"),pb.config.isTouch=$("html").hasClass("touch")}function d(){$(window).width()>767?pb.config.isMobile&&(pb.config.isMobile=!1,b()):pb.config.isMobile||(pb.config.isMobile=!0,b())}function e(){$(".view-all").click(function(a){a.preventDefault(),$(".additional-content").slideToggle(),$(this).children().toggleClass("hide show")}),$(window).resize(function(){d()})}return{init:a}}(),pb.namespace("utils.placeholder"),pb.utils.placeholder=function(){function a(a){d=a;d.val();b(),c()}function b(){d.focus(function(){d.val()==default_val&&d.val("")})}function c(){d.blur(function(){0==d.val().length&&d.val(default_val)})}var d=null;return{init:a}}(),pb.namespace("utils.pagetransition"),pb.utils.pagetransition=function(){function a(a){return a?(h=a,void b()):!1}function b(){window.history&&window.history.pushState?f({success:function(a){history.pushState(null,null,h.pagename+".html"),c(a),g()},failure:function(){console.log("FAILED")}}):location.href=pagename+".html"}function c(a){pb.config.isTouch?e(a):d(a)}function d(a){var b=h.replaceElement;b.after('<div class="page-content next"></div>'),$(".page-content.next").html(a).css({top:"100%",position:"relative"}).animate({top:0},1e3),b.animate({top:"-100%"},1e3,function(){b.remove(),h.callback&&h.callback()})}function e(a){var b=h.replaceElement;b.after('<div class="page-content next"></div>'),$(".page-content.next").html(a),b.slideUp(1e3,function(){$(this).remove()}),$("html, body").scrollTop(0)}function f(a){var b=new XMLHttpRequest,c=location.pathname,d=c.lastIndexOf("/");if(c=c.slice(0,d),b.open("GET",c+"/content/"+h.pagename+"-content.html",!1),b.send(null),200==b.status)if(0!=e){var e=b.responseText;a.success(e)}else a.failure();return!1}function g(){window.addEventListener("popstate",function(){location.href=location.href.split("#")[0]})}var h;return{init:a}},pb.namespace("utils.bgimage"),pb.utils.bgimage=function(){function a(){$(".bgimage").each(function(){var a="";a=$(this).attr(pb.config.isMobile?"data-bg-mobile":"data-bg"),$(this).css("background-image","url("+a+")")})}return{loadBgImages:a}}();